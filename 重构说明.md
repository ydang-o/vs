# 合伙人投票系统 - 项目重构说明

## 重构日期
2025年12月29日

## 重构内容

### 1. 模块重命名
- `diy-common` → `partner-voting-common`
- `diy-pojo` → `partner-voting-pojo`
- `diy-server` → `partner-voting-server`

### 2. 包名重构
- `com.diy.*` → `com.voting.*`

### 3. Maven配置更新
- groupId: `com.diy` → `com.voting`
- artifactId: `diy-bangle` → `partner-voting`
- 所有模块依赖已更新

### 4. 保留的核心实体类
**Entity:**
- Employee.java (员工/管理员)
- User.java (用户)

**DTO:**
- DataOverViewQueryDTO.java
- EmployeeDTO.java
- EmployeeLoginDTO.java
- EmployeePageQueryDTO.java
- PasswordEditDTO.java
- UserLoginDTO.java

**VO:**
- BusinessDataVO.java
- EmployeeLoginVO.java
- TurnoverReportVO.java
- UserLoginVO.java
- UserReportVO.java

**Service:**
- EmployeeService.java / EmployeeServiceImpl.java
- UserService.java / UserServiceImpl.java

**Mapper:**
- EmployeeMapper.java / EmployeeMapper.xml
- UserMapper.java / UserMapper.xml

**Controller:**
- admin/EmployeeController.java
- admin/ShopController.java
- user/UserController.java
- user/ShopController.java

### 5. 已删除的餐饮相关实体
- AddressBook (地址簿)
- Category (分类)
- Dish (菜品)
- DishFlavor (菜品口味)
- Setmeal (套餐)
- SetmealDish (套餐菜品关联)
- ShoppingCart (购物车)
- OrderDetail (订单明细)
- Orders (订单)

及其对应的所有DTO、VO、Service、Controller、Mapper文件

### 6. 配置文件更新
- application.yml: 
  - 包名引用: `com.diy` → `com.voting`
  - 配置前缀: `diy.*` → `voting.*`
  - 数据库名: `sky_take_out` → `partner_voting`
  
- application-dev.yml:
  - 配置前缀: `sky.*` → `voting.*`

### 7. 主类重命名
- `DiyApplication.java` → `PartnerVotingApplication.java`

## 后续工作建议

### 1. 创建投票系统相关实体
建议创建以下新实体类：
- **Partner.java** - 合伙人实体
- **Proposal.java** - 提案实体
- **Vote.java** - 投票实体
- **VoteRecord.java** - 投票记录实体

### 2. 数据库初始化
- 创建新数据库: `partner_voting`
- 设计表结构：
  - partner (合伙人表)
  - proposal (提案表)
  - vote (投票表)
  - vote_record (投票记录表)
  - employee (员工表 - 已有)
  - user (用户表 - 已有)

### 3. 业务功能开发
- 合伙人管理
- 提案创建与管理
- 投票功能
- 投票结果统计
- 权限控制

### 4. 现有功能清理
- 保留的 Employee 和 User 可作为系统管理员和普通用户使用
- ShopController 可能需要根据业务需求修改或删除

## 注意事项
1. 所有包名已从 `com.diy` 改为 `com.voting`
2. Maven依赖已更新，需要重新构建项目
3. 配置文件中的所有引用已更新
4. 清理了编译后的target目录，需要重新编译
